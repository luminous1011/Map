<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./dist/echart.js"></script>
    <!-- <script src="./map/map.js"></script> -->
    <script src="./node_modules/jquery/dist/jquery.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
      }
      html,
      body {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
      }
      #main {
        width: 1440px;
        height: 800px;
        margin: 0 auto;
        border: 1px solid #ddd;
      }
      /*默认长宽比0.75*/
      #in {
        position: absolute;
        z-index: 1000;
        width: 800px;
        height: 600px;
        left: 50%;
        margin-left: -400px;
        display: none;
      }
      .block {
        display: block;
      }
    </style>
  </head>
  <body>
    <div id="main"></div>
    <div id="in"></div>
    <script>
      const dataList = [
        { name: "南海诸岛", value: 0 },
        { name: "北京", value: 1 },
        { name: "天津", value: 3 },
        { name: "上海", value: 4 },
        { name: "重庆", value: 1 },
        { name: "河北", value: 1 },
        { name: "河南", value: 1 },
        { name: "云南", value: 1 },
        { name: "辽宁", value: 1 },
        { name: "黑龙江", value: 1 },
        { name: "湖南", value: 1 },
        { name: "安徽", value: 1 },
        { name: "山东", value: 1 },
        { name: "新疆", value: 1 },
        { name: "江苏", value: 1 },
        { name: "浙江", value: 1 },
        { name: "江西", value: 1 },
        { name: "湖北", value: 1 },
        { name: "广西", value: 1 },
        { name: "甘肃", value: 1 },
        { name: "山西", value: 1 },
        { name: "内蒙古", value: 1 },
        { name: "陕西", value: 1 },
        { name: "吉林", value: 1 },
        { name: "福建", value: 1 },
        { name: "贵州", value: 1 },
        { name: "广东", value: 1 },
        { name: "青海", value: 1 },
        { name: "西藏", value: 1 },
        { name: "四川", value: 1 },
        { name: "宁夏", value: 1 },
        { name: "海南", value: 1 },
        { name: "台湾", value: 1 },
        { name: "香港", value: 1 },
        { name: "澳门", value: 1 },
      ];
      const myChart = echarts.init(document.getElementById("main"));
      $.get("map.json", function (geoJson) {
        echarts.registerMap("china", geoJson);
        const option = {
          backgroundColor: "#333", //画布背景底色
          tooltip: {
            formatter: function (params, ticket, callback) {
              return params.name + "<br />" + "标记点" + "：" + params.geoIndex;
            }, //数据格式化
          },
          visualMap: {
            show: false, //热力区间反射是否显示
          },
          geo: {
            map: "china",
            zoom: 1.36, //地图放大尺寸
            left: "center",
            top: "bottom",
            label: {
              normal: {
                show: true,
                color: "#fff",
              },
              emphasis: {
                show: true,
                color: "#fff",
              },
            },
            roam: false, //禁止平移放大
            itemStyle: {
              normal: {
                borderColor: "rgba(0, 0, 0, 0.2)",
              },
              emphasis: {
                areaColor: "#F3B329", //鼠标选择区域颜色
                shadowOffsetX: 0,
                shadowOffsetY: 0,
                shadowBlur: 20,
                borderWidth: 0,
                shadowColor: "rgba(0, 0, 0, 0.5)",
              },
            },
            regions: [
              {
                name: "北京市", //区块名称
                itemStyle: {
                  normal: {
                    areaColor: "#fbd8f3",
                  },
                },
              },
              {
                name: "湖北省", //区块名称
                itemStyle: {
                  normal: {
                    areaColor: "#f00",
                  },
                  emphasis: {
                    areaColor: "#f00",
                  },
                },
              },
              {
                name: "河南省", //区块名称
                itemStyle: {
                  normal: {
                    areaColor: "#aaf",
                  },
                  emphasis: {
                    areaColor: "#aaf",
                  },
                },
              },
            ],
            //   "left": 0,
            //   "right": 0,
            //   "top": 0,
            //   "bottom": 0
          },
          series: [
            {
              name: "信息量",
              type: "map",
              geoIndex: 0,
              data: dataList,
            },
          ],
        };
        myChart.setOption(option);
      });

      myChart.on("click", function (params) {
        $.get("530000.json", function (geoJson) {
          const divIn = document.getElementById("in");
          divIn.classList.add("block");
          const inChart = echarts.init(divIn);
          echarts.registerMap("上海", geoJson);
          inChart.setOption({
            backgroundColor: "#999",
            visualMap: {
              min: 0,
              max: 500,
              show: false,
              splitNumber: 5,
              inRange: {
                color: ["#d94e5d", "#eac736", "#50a3ba"].reverse(),
              },
              textStyle: {
                color: "#fff",
              },
            },
            geo: {
              map: "上海",
              label: {
                normal: {
                  show: true,
                  color: "#fff",
                },
                emphasis: {
                  show: true,
                  color: "#fff",
                },
              },
              roam: false,
              itemStyle: {
                normal: {
                  borderColor: "rgba(0, 0, 0, 0.2)",
                  // areaColor:'#009966'
                },
                emphasis: {
                  areaColor: "#F3B329", //鼠标选择区域颜色
                  shadowOffsetX: 0,
                  shadowOffsetY: 0,
                  shadowBlur: 20,
                  borderWidth: 0,
                  shadowColor: "rgba(0, 0, 0, 0.5)",
                },
              },
            },
            series: [],
          });
        });
      });
    </script>
  </body>
</html>
